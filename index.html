<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProGlove Scanner - Bowl Tracking</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database.js"></script>
    
    <!-- SheetJS for Excel Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üçú ProGlove Scanner</h1>
            <p class="subtitle">Bowl Tracking System</p>
        </header>

        <!-- Mode Selection -->
        <div class="section">
            <h2>Select Mode</h2>
            <div class="mode-selector">
                <button id="kitchenBtn" class="mode-btn" onclick="setMode('kitchen')">Kitchen Mode</button>
                <button id="returnBtn" class="mode-btn" onclick="setMode('return')">Return Mode</button>
            </div>
        </div>

        <!-- User Selection -->
        <div class="section">
            <h2>User Selection</h2>
            <div class="dropdown-group">
                <label for="userDropdown">Select User:</label>
                <select id="userDropdown" onchange="selectUser()">
                    <option value="">-- Select User --</option>
                </select>
            </div>
            
            <!-- Dish Selection (Kitchen Mode Only) -->
            <div id="dishSection" class="dish-section hidden">
                <div class="dropdown-group">
                    <label for="dishDropdown">Select Dish Letter:</label>
                    <select id="dishDropdown" onchange="selectDishLetter()">
                        <option value="">-- Select Dish --</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Scanning Controls -->
        <div class="section">
            <h2>Scanning Controls</h2>
            <div class="scan-controls">
                <button id="startBtn" class="btn-primary" onclick="startScanning()">START SCANNING</button>
                <button id="stopBtn" class="btn-secondary" onclick="stopScanning()">STOP SCANNING</button>
            </div>
            
            <div class="scanner-input">
                <input type="text" id="progloveInput" placeholder="Click START SCANNING..." disabled>
            </div>
            
            <div id="feedback" class="feedback"></div>
        </div>

        <!-- Status Display -->
        <div class="section">
            <h2>Current Status</h2>
            <div class="status-display">
                <div class="status-card">
                    <h3>Active Bowls</h3>
                    <div class="count" id="activeCount">0</div>
                </div>
                <div class="status-card">
                    <h3>Prepared Today</h3>
                    <div class="count" id="prepCount">0</div>
                </div>
            </div>
        </div>

        <!-- JSON Import Section -->
        <div class="section">
            <h2>JSON Data Import</h2>
            <textarea id="jsonData" placeholder="Paste JSON data here..."></textarea>
            <div class="scan-controls">
                <button id="processJSONBtn" class="btn-primary" onclick="processJSONData()">Process JSON Data</button>
            </div>
        </div>

        <!-- Data Export Section -->
        <div id="exportSection" class="section">
            <h2>Data Export</h2>
            <div class="export-controls">
                <div class="export-format-selector">
                    <label>Export Format:</label>
                    <select id="exportFormat">
                        <option value="excel">Excel</option>
                        <option value="csv">CSV</option>
                        <option value="json">JSON</option>
                    </select>
                </div>
                <div class="export-data-selector">
                    <label>Data to Export:</label>
                    <select id="exportDataType">
                        <option value="all">All Data</option>
                        <option value="active">Active Bowls</option>
                        <option value="prepared">Prepared Bowls</option>
                        <option value="returned">Returned Bowls</option>
                        <option value="today">Today's Data</option>
                    </select>
                </div>
                <div class="export-actions">
                    <button id="exportBtn" class="btn-primary">Export Data</button>
                    <button id="clearDataBtn" class="btn-secondary">Clear All Data</button>
                </div>
            </div>
            
            <div class="export-info">
                <h4>Color Coding in Excel Export:</h4>
                <ul>
                    <li><span class="color-demo" style="color: green;">Green</span> - Single customer</li>
                    <li><span class="color-demo" style="color: red;">Red</span> - Multiple customers</li>
                    <li><span class="color-demo" style="color: #FFD700;">Yellow</span> - Active 3+ days</li>
                    <li><span class="color-demo" style="color: #FF69B4;">Pink</span> - Active 4+ days</li>
                    <li><span class="color-demo" style="color: #FFA500;">Orange</span> - Active 5+ days</li>
                    <li><span class="color-demo" style="color: #FF0000;">Red</span> - Active 6+ days</li>
                </ul>
            </div>
            
            <div id="exportStatus" class="export-status"></div>
        </div>

        <!-- Statistics Section -->
        <div class="section">
            <h2>Statistics</h2>
            <button id="showStatsBtn" class="btn-primary">Show Statistics Report</button>
        </div>

        <!-- Recent Activity -->
        <div class="section">
            <h2>Recent Activity</h2>
            <div id="recentActivity" class="recent-activity">
                <p>No recent activity</p>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="config.js"></script>
    <script src="data-manager.js"></script>
    <script src="scanner-core.js"></script>
    <script src="firebase-manager.js"></script>
    <script src="ui-manager.js"></script>
    <script src="json-importer.js"></script>
    <script src="statistics.js"></script>
    <script src="export-data.js"></script>
    <script src="code.js"></script>
</body>
</html>
